<style type="text/css"><!--	div.ea_table{		overflow:auto;		clear:both;		font-family: arial,sans-serif;		font-size: 12px;	}	div.ea_head{		clear: both;		height: 20px;		padding: 5px;		font-weight:bold;	}		div.ea_hcol1{		float:left;		width:45%;		color:#A57701;	}	div.ea_hcol2, div.ea_hcol3, div.ea_hcol4, div.ea_hcol6{		float:left;		width:10%;		text-align: center;	}	div.ea_hcol2{		color:#20910A;	}	div.ea_hcol3{		color:#B70309;	}	div.ea_hcol4{		color:#A57701;	}	div.ea_hcol5{		float:right;		width:15%;	}		div.ea_row{		border-top: 1px solid #E7E598;		clear: both;		height: 20px;		padding: 5px;	}		div.ea_col1{		float: left;		font-size: 12px;		font-weight: bold;		width: 45%;	}	div.ea_col2, div.ea_col3, div.ea_col4, div.ea_col6{		float:left;		width:10%;	    text-align: center;	}	div.ea_col5{		float:right;		width:15%;		text-align:right;	}		div.ea_col5 a{		color:#C10101;	}		div.ea_col5 a:hover{		text-decoration:none;	}		div.ea_foot{		border-top: 1px solid #E7E598;		clear: both;		height: 20px;		padding: 5px;		font-weight:bold;	}//--></style><div class="form-row" style="clear:both; margin-top:40px;">	<div class="ea_table">		<div class="ea_head">			<div class="ea_hcol1">Event Attendee Name (A-Z)</div>			<div class="ea_hcol2">Attended</div>			<div class="ea_hcol3">Failed to attend</div>			<div class="ea_hcol4">Walk-in</div>			<div class="ea_hcol6">Paid</div>			<div class="ea_hcol5"></div>		</div>		<?			$attended_count = 0;			$failed_to_attend_count = 0;			$walkin_count = 0;			$paid_count = 0;			foreach($event_reg_members as $member){				if($member['EventRegistration']['payment_status_id']){					$paid_count++;				}				switch($member['EventRegistration']['event_attendee_status_id']){					case 1:						$attended_count++;						break;					case 2:						$failed_to_attend_count++;						break;					case 3:						$walkin_count++;						break;				}		?>		<div class="ea_row" id="ea_row_<?=$member['EventRegistration']['id'];?>">			<div class="ea_col1">			<span style="float:left"><?=$member['Member']['gname'].' '.$member['Member']['lname'];?></span>			<img src="/img/spinner.gif" alt="saving changes..." style="display:none;float:left;" id="em_loader_<?=$member['EventRegistration']['id'];?>"/>			</div>			<div class="ea_col2"><input onclick="change_attendee_status(<?=$member['EventRegistration']['id'];?>,1);" <?=($member['EventRegistration']['event_attendee_status_id']==1)?'checked="checked"':'';?> type="radio" name="event_attendee_status_<?=$member['EventRegistration']['id'];?>" value="1" /></div>			<div class="ea_col3"><input onclick="change_attendee_status(<?=$member['EventRegistration']['id'];?>,2);"  <?=($member['EventRegistration']['event_attendee_status_id']==2)?'checked="checked"':'';?> type="radio" name="event_attendee_status_<?=$member['EventRegistration']['id'];?>" value="2" /></div>			<div class="ea_col4"><input onclick="change_attendee_status(<?=$member['EventRegistration']['id'];?>,3);"  <?=($member['EventRegistration']['event_attendee_status_id']==3)?'checked="checked"':'';?> type="radio" name="event_attendee_status_<?=$member['EventRegistration']['id'];?>" value="3" /></div>			<div class="ea_col6"><input onclick="change_paid_status(<?=$member['EventRegistration']['id'];?>);"  <?=($member['EventRegistration']['payment_status_id']==2)?'checked="checked"':'';?> type="checkbox" name="event_paid_status_<?=$member['EventRegistration']['id'];?>" value="paid" id="event_paid_status_<?=$member['EventRegistration']['id'];?>" /></div>			<div class="ea_col5"><a href="#" onclick="remove_attendee(<?=$member['EventRegistration']['id'];?>);return false;">x remove</a></div>		</div>		<?			}		?>		<div class="ea_foot">			<div class="ea_hcol1" id="div_total_attendee_count">Total: <?=count($event_reg_members)?> attendees</div>			<div class="ea_hcol2" id="div_attended_count"><?=$attended_count;?></div>			<div class="ea_hcol3" id="div_failed_to_attend_count"><?=$failed_to_attend_count;?></div>			<div class="ea_hcol4" id="div_walkin_count"><?=$walkin_count;?></div>			<div class="ea_hcol6" id="div_paid_count"><?=$paid_count;?></div>			<div class="ea_hcol5"></div>		</div>	</div></div><script type="text/javascript">	function change_paid_status($evt_reg_id){		$('em_loader_'+$evt_reg_id).show();		var payment_status_id = 1; 			if($('event_paid_status_'+$evt_reg_id).checked){			payment_status_id = 2; 			}		new Ajax.Request('/admin/event_registrations/change_paid_status',		  {			method:'post',			parameters: { 				'data[EventRegistration][id]': $evt_reg_id,				'data[EventRegistration][payment_status_id]': payment_status_id 			},			onSuccess: function(transport){				var ivalue = transport.responseText || "no response text";					if(ivalue!="no response text" && ivalue.trim()=='1'){					//alert('Saved Changes');				}else{					alert('Something went wrong...')				}				$('em_loader_'+$evt_reg_id).hide();		    },			onFailure: function(){ alert('Something went wrong...') }		  });		  updateEvtAttendeesCount();	}	function change_attendee_status($evt_reg_id, $status_id){		$('em_loader_'+$evt_reg_id).show();		new Ajax.Request('/admin/event_registrations/change_status',		  {			method:'post',			parameters: { 				'data[EventRegistration][id]': $evt_reg_id,				'data[EventRegistration][event_attendee_status_id]': $status_id 			},			onSuccess: function(transport){				var ivalue = transport.responseText || "no response text";					if(ivalue!="no response text" && ivalue.trim()=='1'){					//alert('Saved Changes');				}else{					alert('Something went wrong...')				}				$('em_loader_'+$evt_reg_id).hide();		    },			onFailure: function(){ alert('Something went wrong...') }		  });		   updateEvtAttendeesCount();	}		function remove_attendee($evt_reg_id){		$('em_loader_'+$evt_reg_id).show();		new Ajax.Request('/admin/event_registrations/remove',		  {			method:'post',			parameters: { 				'data[EventRegistration][id]': $evt_reg_id			},			onSuccess: function(transport){				var ivalue = transport.responseText || "no response text";					if(ivalue!="no response text" && ivalue.trim()=='1'){					//alert('Removed');					$('ea_row_'+$evt_reg_id).remove();				}else{					alert('Something went wrong...')				}				$('em_loader_'+$evt_reg_id).hide();		    },			onFailure: function(){ alert('Something went wrong...') }		  });		  updateEvtAttendeesCount();	}		function updateEvtAttendeesCount(){		attended = 0;		failed_to_attended = 0;		walk_in = 0;		paid_count = 0;		var earows = $$('div.ea_row');		earows.each(function(e){			var row_inputs = $$('div#'+e.id+' input');			for(var iri=0;iri<4;iri++){				if(row_inputs[iri].checked){					switch(iri){						case 0: 							attended = attended + 1;							break;						case 1: 							failed_to_attended = failed_to_attended + 1;							break;						case 2: 							walk_in = walk_in + 1;							break;						case 3: 							paid_count = paid_count + 1;							break;					}				}			}		});		$('div_total_attendee_count').update('Total: '+earows.length+' attendees');		$('div_attended_count').update(attended);		$('div_failed_to_attend_count').update(failed_to_attended);		$('div_walkin_count').update(walk_in);		$('div_paid_count').update(paid_count);	}</script>